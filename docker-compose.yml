services:
  acexy:
    image: ghcr.io/javinator9889/acexy:0.2.0
    restart: unless-stopped
    ports:
      - 8080:8080/tcp
    environment:
      ACEXY_ADDR: ":8080"            # Listen on port 8080
      ACEXY_SCHEME: "http"           # Use HTTP
      ACEXY_HOST: "acestream"        # Host is "acestream" or the name of the AceStream service
      ACEXY_PORT: "6878"             # Port is 6878
      ACEXY_TIMEOUT: "60s"           # Stream timeout when in M3U8 mode
      ACEXY_M3U8: "false"            # Disable M3U8 mode
      ACEXY_EMPTY_TIMEOUT: "60s"     # Timeout to close the connection if no data is received
      ACEXY_BUFFER: "4MB"            # Buffer size is 4MB
      ACEXY_NO_RESPONSE_TIMEOUT: "10s"  # Timeout to close the connection if no response is received
      # Orchestrator integration (optional)
      # ACEXY_ORCH_URL: ""           # Base URL for orchestrator API (leave empty to disable orchestrator integration)
      # ACEXY_ORCH_APIKEY: ""        # API key for orchestrator authentication (optional)
      # ACEXY_CONTAINER_ID: ""       # Container ID for orchestrator identification (auto-detected if empty)
    links:
      - acestream
    depends_on:
      - acestream

  acestream:
    image: martinbjeldbak/acestream-http-proxy:latest  # or whatever image you want to use
    restart: unless-stopped
    # you can expose here the ports if you want to access the acestream service directly
    # ports:
    #   - "6878:6878"
    # environment:
      # Flags for the AceStream server
      # EXTRA_FLAGS: "--cache-dir /tmp --cache-limit 2 --cache-auto 1 --log-stderr --log-stderr-level error"
